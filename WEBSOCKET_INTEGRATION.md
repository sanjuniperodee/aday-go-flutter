# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π WebSocket –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è Taxi Service

## ‚úÖ –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–û–ö–†–´–¢–´–• –ö–ï–ô–°–û–í

### –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ:
1. **CREATED** - –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω, –∏—â–µ–º –≤–æ–¥–∏—Ç–µ–ª—è
2. **STARTED** - –≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–Ω—è–ª –∑–∞–∫–∞–∑, –µ–¥–µ—Ç –∫ –∫–ª–∏–µ–Ω—Ç—É  
3. **WAITING** - –≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–±—ã–ª –Ω–∞ –º–µ—Å—Ç–æ (–Ω–∞ –º–µ—Å—Ç–µ)
4. **ONGOING** - –ø–æ–µ–∑–¥–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å
5. **COMPLETED** - –ø–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
6. **REJECTED** - –∑–∞–∫–∞–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω (–æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å)
7. **REJECTED_BY_CLIENT** - –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–º
8. **REJECTED_BY_DRIVER** - –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–º

### ‚úÖ –í–°–ï –ü–û–ö–†–´–¢–´–ï –ö–ï–ô–°–´:

#### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**
- ‚úÖ –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ API
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω—É–∂–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª—è–º
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –≤–æ–¥–∏—Ç–µ–ª—è–º
- ‚úÖ –ó–∞–∫–∞–∑ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É, –µ—Å–ª–∏ –æ–Ω —Å–∞–º –≤–æ–¥–∏—Ç–µ–ª—å

#### 2. **–ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–º**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ API
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `orderAccepted` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–æ–¥–∏—Ç–µ–ª–µ –∏ –º–∞—à–∏–Ω–µ
- ‚úÖ –î—Ä—É–≥–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç `orderTaken` (–∑–∞–∫–∞–∑ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `STARTED`

#### 3. **–ü—Ä–∏–±—ã—Ç–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è (–Ω–∞ –º–µ—Å—Ç–µ)**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–Ø –Ω–∞ –º–µ—Å—Ç–µ" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `driverArrived` —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `WAITING`
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞—à–∏–Ω–µ

#### 4. **–ù–∞—á–∞–ª–æ –ø–æ–µ–∑–¥–∫–∏**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å –ø–æ–µ–∑–¥–∫—É"
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `rideStarted`
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `ONGOING`

#### 5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–µ–∑–¥–∫—É"
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `rideEnded`
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `COMPLETED`
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ü–µ–Ω–∏—Ç—å –ø–æ–µ–∑–¥–∫—É

#### 6. **–û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –ö–õ–ò–ï–ù–¢–û–ú**
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
- ‚úÖ –ï—Å–ª–∏ –≤–æ–¥–∏—Ç–µ–ª—å —É–∂–µ –ø—Ä–∏–Ω—è–ª - –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç `orderCancelledByClient`
- ‚úÖ –í—Å–µ –≤–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç `orderDeleted` (—É–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞)
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `REJECTED_BY_CLIENT`

#### 7. **–û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –í–û–î–ò–¢–ï–õ–ï–ú**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–∫–∞–∑ (–Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å) - –∑–∞–∫–∞–∑ –æ—Å—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å —É–∂–µ –ø—Ä–∏–Ω—è—Ç—ã–π –∑–∞–∫–∞–∑
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `orderCancelledByDriver` 
- ‚úÖ –ó–∞–∫–∞–∑ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `REJECTED_BY_DRIVER`

#### 8. **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –í–°–ï–ì–î–ê –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–∞–∑–∞)
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–µ—à–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `driverLocation` –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —É –≤–æ–¥–∏—Ç–µ–ª—è –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–∫–∞–∑–µ –∏ –µ–≥–æ —Å—Ç–∞—Ç—É—Å–µ

#### 9. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–æ–º**
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ –æ–Ω–ª–∞–π–Ω (`driverOnline`)
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–π—Ç–∏ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω (`driverOffline`)
- ‚úÖ –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª—è–º
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞

## –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã Gateway

### –ú–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤:
```typescript
handleOrderCreated()        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
handleOrderAccepted()       // –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞
handleDriverArrived()       // –í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–±—ã–ª (–Ω–∞ –º–µ—Å—Ç–µ) 
handleRideStarted()         // –ù–∞—á–∞–ª–æ –ø–æ–µ–∑–¥–∫–∏
handleRideEnded()           // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏
handleOrderRejected()       // –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
handleOrderCancelledByClient()   // –û—Ç–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
handleOrderCancelledByDriver()   // –û—Ç–º–µ–Ω–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–º
```

### –ú–µ—Ç–æ–¥—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```typescript
notifyClient()              // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
notifyDriver()              // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–æ–¥–∏—Ç–µ–ª—è  
broadcastToOnlineDrivers()  // –†–∞—Å—Å—ã–ª–∫–∞ –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª—è–º
```

## –°–æ–±—ã—Ç–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –î–∞–Ω–Ω—ã–µ |
|---------|------------------|--------|
| `orderAccepted` | –í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–Ω—è–ª –∑–∞–∫–∞–∑ | driver, order, timestamp |
| `driverArrived` | –í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–±—ã–ª –Ω–∞ –º–µ—Å—Ç–æ | message: "–í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–±—ã–ª –∏ –∂–¥–µ—Ç –≤–∞—Å" |
| `rideStarted` | –ü–æ–µ–∑–¥–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å | message: "–ü–æ–µ–∑–¥–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å" |
| `rideEnded` | –ü–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ | message: "–ü–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞" |
| `orderCancelledByDriver` | –í–æ–¥–∏—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –∑–∞–∫–∞–∑ | reason, message |
| `driverLocation` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–æ–¥–∏—Ç–µ–ª—è | lat, lng, orderId, orderStatus |

## –°–æ–±—ã—Ç–∏—è –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –î–∞–Ω–Ω—ã–µ |
|---------|------------------|--------|
| `newOrder` | –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–æ—Å—Ç—É–ø–µ–Ω | order details, clientId, coordinates |
| `orderTaken` | –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –¥—Ä—É–≥–∏–º –≤–æ–¥–∏—Ç–µ–ª–µ–º | orderId, takenBy |
| `orderDeleted` | –ó–∞–∫–∞–∑ —É–¥–∞–ª–µ–Ω/–æ—Ç–º–µ–Ω–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–º | orderId, reason |
| `orderCancelledByClient` | –ö–ª–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω–∏–ª –∑–∞–∫–∞–∑ | orderId, reason, message |

## –û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤

### –û—Ç –≤–æ–¥–∏—Ç–µ–ª–µ–π:
- `driverOnline` - –≤—ã—Ö–æ–¥ –≤ –æ–Ω–ª–∞–π–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
- `driverOffline` - —É—Ö–æ–¥ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω  
- `driverLocationUpdate` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ)

### –û—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤:
- –ü–æ–∫–∞ –Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ REST API

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞:
```dart
{
  'userType': 'client',
  'userId': userId,
  'sessionId': sessionId,
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è:
```dart
{
  'userType': 'driver', 
  'driverId': driverId,
  'sessionId': sessionId,
  'lat': latitude,        // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
  'lng': longitude,       // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
}
```

## –ö–æ–º–Ω–∞—Ç—ã WebSocket

- `client_${userId}` - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- `driver_${driverId}` - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–¥–∏—Ç–µ–ª—è
- `all_drivers` - –≤—Å–µ –≤–æ–¥–∏—Ç–µ–ª–∏ (–æ–Ω–ª–∞–π–Ω –∏ –æ—Ñ—Ñ–ª–∞–π–Ω)
- `online_drivers` - —Ç–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω –≤–æ–¥–∏—Ç–µ–ª–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –∫–µ–π—Å–æ–≤** - –∫–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. **–¢–æ—á–µ—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞** - —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
3. **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - –ø–æ–∑–∏—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è –∑–∞–∫–∞–∑–∞
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–º–µ–Ω—ã** - –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–º
5. **–û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å** - –∑–∞–∫–∞–∑—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–º –≤–æ–¥–∏—Ç–µ–ª—è–º
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏ —Å–æ–±—ã—Ç–∏—è

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ TypeScript –≤ –±—ç–∫–µ–Ω–¥–µ
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–º–µ–Ω—É –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–º  
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
5. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å heartbeat –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
6. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
7. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:
- `üîå –ù–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: userType=driver, driverId=123`
- `üì¶ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ 789, –Ω–∞–π–¥–µ–Ω–æ –≤–æ–¥–∏—Ç–µ–ª–µ–π: 5`
- `‚úÖ –ó–∞–∫–∞–∑ 789 –ø—Ä–∏–Ω—è—Ç –≤–æ–¥–∏—Ç–µ–ª–µ–º 123`
- `üöó –í–æ–¥–∏—Ç–µ–ª—å 123 –ø—Ä–∏–±—ã–ª –∫ –∫–ª–∏–µ–Ω—Ç—É 456 –¥–ª—è –∑–∞–∫–∞–∑–∞ 789`
- `üöÄ –ü–æ–µ–∑–¥–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å: –∑–∞–∫–∞–∑ 789, –≤–æ–¥–∏—Ç–µ–ª—å 123`
- `üèÅ –ü–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –∑–∞–∫–∞–∑ 789, –≤–æ–¥–∏—Ç–µ–ª—å 123`
- `üö´ –ó–∞–∫–∞–∑ 789 –æ—Ç–º–µ–Ω–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–º`
- `üö´ –ó–∞–∫–∞–∑ 789 –æ—Ç–º–µ–Ω–µ–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–º 123`

### –õ–æ–≥–∏ Flutter:
–í–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏ WebSocketService –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏. 